private-llm-server:8080 {
	tls /etc/caddy/certs/server.crt /etc/caddy/certs/server.key {
		protocols tls1.3
		client_auth {
			mode require_and_verify
			trust_pool file /etc/caddy/certs/ca.crt
		}
	}

	log {
		output file /var/log/caddy/access.log
	}

	@bearer header Authorization "Bearer {{INTERNAL_TOKEN}}"

	handle @bearer {
		reverse_proxy localhost:11434 {
			flush_interval -1
			header_up Host localhost:11434
		}
	}

	respond "Unauthorized" 401
}
